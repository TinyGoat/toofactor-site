<% content_for :head do %>
  <%= javascript_include_tag 'https://js.stripe.com/v1/', 'registration.js' %>
  <%= tag :meta, :name => 'stripe-key', :content => STRIPE_PUBLIC_KEY %>
<% end %>

<div class="form-header">
  <h2>Sign Up</h2>
</div>

<div class="form center">

  <%= form_for(resource,
               as: resource_name,
               url: registration_path(resource_name),
               id: 'user-registration-form') do |f| %>

    <div class="form-errors">
      <%= devise_error_messages! %>
      <div id="stripe-errors"></div>
    </div>

    <%= f.hidden_field :stripe_token %>

    <p>
      <%= f.label :email %>
      <%= f.email_field :email %>
    </p>

    <p>
      <%= f.label :password %>
      <%= f.password_field :password %>
    </p>

    <p>
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation %>
    </p>

    <fieldset class="credit-card">
      <h3>Payment Info</h3>

      <div class="magnetic-stripe"></div>

        <p>
          <label>Card Number</label>
          <input type="text" size="20" autocomplete="off" class="card-number" placeholder="4242 4242 4242 4242" required>
        </p>

        <p class="cvc">
          <label>CVC</label>
          <input type="text" size="4" autocomplete="off" class="card-cvc" required>
        </p>

        <p class="date">
          <label>Expiry Date</label>
          <input type="text" size="2" class="card-expiry-month" placeholder="MM" required> / <input type="text" size="4" class="card-expiry-year" placeholder="YYYY" required>
        </p>

        <p class="hint">Don't worry. We won't bill you until your 15 day trial is up. After that, cancel anytime.</p>

    </fieldset>

    <div class="actions">
      <%= f.submit "Sign Up", :class => "btn small blue" %>
    </div>

  <% end %>

</div>

